Date: 2010-11-19
Title: 阿里巴巴校招2010年软研面经
Category: 程序员的面经
Tags: 阿里面经
Slug: ali_2
Img:pics/alibaba.jpg
summary:**阿里**一个非常神圣的公司，面试过程中主要问了`26`个问题，如ConcurrentMap和HashMap的区别?Tomcat，apache，jboss的区别?GET/POST区别?`SESSION`, COOKIE区别?Servlet的生命周期?Statement与PreparedStatement的区别,什么是SQL注入，如何防止SQL注入?谈谈Hibernate的理解，一级和二级缓存的作用等

刚刚参加了阿里巴巴的面试，现将题目公布于此，希望对找工作的人有帮助。

1、String,StringBuffer, StringBuilder 的区别是什么？String为什么是不可变的？

这道题源码分析，可以参考这篇博文
<a href="http://www.yanyulin.info/pages/2013/07/string.html" target="_blank">
String StringBuffer StringBuilder的区别分析
</a>

String对象的值是不可变的，而StringBuffer和StringBuilder的值可以变化，适用于动态拼接长字符串，如SQL语句。StringBuffer是同步的，StringBuilder是非同步的。String类中用于保存字符串值的是char数组，该数组被声明为final，因而是不可变的。

2、`VECTOR`,`ARRAYLIST`, `LINKEDLIST`的区别是什么？

这道题源码分析，可以参考这篇博文
<a href="http://blog.csdn.net/zwjlpeng/article/details/9701249" target="_blank">
String StringBuffer StringBuilder的区别分析
</a>

`Vector`是java1版本遗留下来的，本身为同步的，Arraylist类似于数组，各个元素的物理存储位置相邻，适用于随机存取，但插入删除会造成元素移动；而LinkedList是通常所说的链表，逻辑位置相邻的元素物理上不一定是相邻存储，适用于插入删除较多的情况，而查找效率较低。

3、`Hashtable`, `HashMap`，`TreeMap`区别

这道题源码分析，可以参考这篇博文
<a href="http://blog.csdn.net/zwjlpeng/article/details/9746425" target="_blank">
String StringBuffer StringBuilder的区别分析
</a>

`Hashtable`和`HashMap`都实现了Map接口，都是通过hash函数将一个值映射到一个存储位置从而实现键值对的高效查询。Hashtable为java1版本遗留下来的，是同步的，键和值都不能为null，判断是否包含键值，通过contains(key,value)来实现；HashMap是非同步的，因此在单线程环境下，其效率比Hashtable要高，可以存入一个`null`键，多个null值，将判断是否包含键值区分为containsKey(key)和containsValue(value)两种方式。TreeMap主要是实现了键的排序功能，即各个键是按序排列的。

4、`ConcurrentMap`和`HashMap`的区别

ConcurrentMap是专用于多线程环境的，是同步的。而HashMap针对单线程环境，方法都不是同步的，要在多线程中实现同步必须通过外加同步。

5、`Tomcat`，`apache`，`jboss`的区别

Tomcat，JBoss

6、`GET/POST`区别

Get和Post是指Servlet中处理HttpServletRequest时的不同方式，其设定方式是在表单中的action method指定（get或post），则请求提交到对应servlet时，会调用相应的doPost()或doGet()方法。
二者的主要区别：get是通过url流来传递数据的，因此要传送的数据直接通过url后加参数值对来实现，缺点是安全性不高，密码等不能通过该方式来传递，而且传输的数据量有严格的限制；post是通过新建的流来实现数据的传输的，因此url不会显示需要传输的数据，安全性相对来说要高，而且传输的数据量没有限制。

7、`SESSION`, `COOKIE`区别

二者都是用来记录用户信息的方式。Session是指一次Http会话，其生命周期也仅此一次会话，因此只能保存一次会话的信息，会话结束后session对象就会销毁。而Cookie是指浏览器为了记忆用户的某些常用信息而保存在客户端的数据，数据不会随会话的结束而丢失。

8、`Servlet`的生命周期

Web容器启动后，当用户请求某个servlet时，先查看容器中是否已经有该servlet的实例，如果存在，则直接将请求发送给改serlvet处理，否则新建一个servlet实例，调用其init方法进行初始化操作，然后调用其service方法处理请求，处理的方式有doGet和doPost等，请求处理完成后形成http响应发送给客户端，当Web容器退出后，会调用servlet的destroy方法将serlvet实例销毁。

9、`HTTP`报文包含内容

Http报文包括HttpRequest报文和HttpResponse报文。
HttpRequest报文包括：Http版本信息，字符编码，请求的URI，请求方式（get或post），请求标头信息，请求主体。HttpResponse报文头包括：Http版本，响应的状态码，响应状态码对应的摘要文字，响应标头信息，以及响应主体

10、`Statement`与`PreparedStatement`的区别,什么是SQL注入，如何防止SQL注入？

Statement和PreparedStatement都是用于执行SQL语句的对象。Statement的sql语句无法进行动态的修改，必须在运行时才对sql语句进行解析。PreparedStatement正如其名，在编译期就对sql语句进行了解析放入内存中，适用于很多sql语句模式一样，只是数据不同的情况，不需要对每一个都进行sql解析，提高了效率。PreparedStatement还可以实现批量sql的执行。SQL注入是指在动态拼接sql语句的过程中，插入恶意的数据，导致原本的sql语句含义甚至结构发生了变化。防止sql注入的方式：对用户输入控件的输入文本进行合法性校验，如果发现疑似注入的内容，予以屏蔽。

11、redirect, foward区别

redirect是重定位，这是通过浏览器重新请求某个新的URL，然后接收响应数据并展示给用户，因此浏览器知道整个重定位的过程。而forward直接通过servlet向服务器请求某个URL，得到响应后，将数据再发给浏览器，因此浏览器根本不知道这个响应信息是否是经过转发的。

12、关于JAVA内存模型，一个类（两个属性，四个方法）实例化100次，现在内存中的存储状态，
几个对象，几个属性，几个方法。

Java的内存分为栈和堆，栈是程序运行的单位，主要保存基本数据类型的数据和程序运行时的信息，而堆主要保存对象的信息。
而Java的堆是按分代方式来组织的，分为年轻代（新生代、幸存1区，幸存2区），年老代以及持久代。其中新建的对象一般都在新生代，随着系统的运行，GC会将新生代的对象移至幸存区，年老代。而持久代主要保存类信息和方法信息。因此，一个包含两个属性四个方法的类实例化100次后再内存中的存储状态：四个方法仅在持久代内存区域存储1份，而对象在新生代会产生100个，且每个对象都有自己的属性，故内存中有200个属性值。

13、谈谈Hibernate的理解，一级和二级缓存的作用，在项目中Hibernate都是怎么使用缓存的。

Hibernate是ORM框架的一种实现，为了使用户从繁重的SQL语句中解放出来而设计的，将对象与关系数据库中的实体通过配置文件建立映射关系，从而实现数据的存取对象化。

14、反射讲一讲，主要是概念,都在哪需要反射机制，反射的性能，如何优化

反射是通过类名来加载类的信息，并创建对象。一般都是通过反射来实现Java的多态性，可扩展性。Java中主张面向接口编程，当用户需要新的特性时，只要实现指定的接口，并通过修改配置文件即可将新性能挂接到原有系统中，而不需要对原有系统进行修改。

15、谈谈Hibernate与Ibatis的区别，哪个性能会更高一些


16、对Spring的理解，项目中都用什么？怎么用的？对`IOC`、和AOP的理解及实现原理

17、线程同步，并发操作怎么控制

多线程环境下，不同线程如果不共享数据时，可以异步执行，提高系统的性能与效率，但是当需要共享数据时，需要做同步控制，以保持数据的一致性。线程同步是指多个线程共享数据，其中一个线程需要使用另一个线程的结果，必须等另一个线程执行完成后才能继续执行。在java中线程同步主要通过synchronized关键字，wait()，notify(),notifyAll()机制，Lock等来实现线程同步。同步操作通过锁机制保证同一时间只有一个线程访问该对象，但是也存在一定的问题：导致性能下降，容易出现死锁。

18、描述struts的工作流程。

浏览器客户端提出request请求，Web容器接收到request后，交给`ActionServlet`，根据struts-config.xml配置文件中配置的表单，生成ActionForm，将请求转发给Action，Action调用ActionForm以及JavaBean执行逻辑处理，形成ActionForward返回给ActionServlet，ActionServlet根据配置将请求转发给相应的JSP页面，JSP页面调用JavaBean后形成Http响应回送给客户端。

19、`Tomcat`的session处理，如果让你实现一个tomcatserver，如何实现session机制

20、关于Cache(Ehcache,Memcached)

21、sql的优化相关问题

22、oracle中 rownum与rowid的理解，一千条记录我查200到300的记录怎么查？

假设表为TABLE_NAME，则查询表中第200到第300条记录的SQL语句如下：

<textarea style="width:100%;height:100px">
SELECT * FROM (
　　SELECT rownum num, x.* FROM(
　　　　SELECT * TABLE_NAME ORDER BY PRI_KEY
　　)x
)y
WHERE y.num BETWEEN 200 AND 300；
</textarea>

23、如何分析ORACLE的执行计划？

24、 DB中索引原理，种类，使用索引的好处和问题是什么？

DB中为了能快速检索数据，对记录添加索引，一般采用B+树索引。索引分为聚簇索引和非聚簇索引。当在表的某个字段建立聚簇索引后，记录相当于索引数的叶子节点，故记录的物理顺序会按指定字段的值进行调整，因此一个表只能建立一个聚簇索引，这种索引不适用于大量插入删除数据的情况，因为会导致记录的频繁移动，降低性能。而在表上建立非聚簇索引后，记录位于索引树外，故表的记录不会发生物理上的顺序调整，一个表上可以在多个字段上建立非聚簇索引，这种索引适应于对表进行频繁增删的情况。

25、`JVM`垃圾回收实现原理。垃圾回收的线程优先级。

26、`jvm`最大内存设置。设置的原理。结合垃圾回收讲讲。

`-Xms:1024m` 设置初始化堆大小
`–Xmx:1024m `设置最大堆大小
具体大小应根据内存总大小值来确定，一般这两个值应相等，否则当内存不够时，造成GC重新分配内存。
`-XX:PermSize=1024m` 设置永久内存区大小
`-XX:MaxParmSize=1024m` 设置最大永久内存区大小。

到此为止